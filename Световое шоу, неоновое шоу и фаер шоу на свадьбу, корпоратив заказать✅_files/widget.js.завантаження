function widgetError(error){window.console&&console.warn("Eventcatalog Error: "+error+". Please contact us https://eventcatalog.ru/findwidgetError/")}function getMenuNames(){return"UTF-8"!=document.charset?{personalPage:"Personal Page",portfolio:"Portfolio",review:"Write a review",favorite:"Add to favorites",note:"Write a note"}:{personalPage:"Персональная страница",portfolio:"Портфолио",review:"Написать отзыв",favorite:"Добавить в избранное",note:"Написать заметку"}}window.jsonParse=function(){function v(h,j,e){return j?u[j]:String.fromCharCode(parseInt(e,16))}var r="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)",k='(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))';k='(?:"'+k+'*")';var s=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]|"+r+"|"+k+")","g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),u={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},w=new String(""),x=Object.hasOwnProperty;return function(h,j){h=h.match(s);var e,c=h[0],l=!1;"{"===c?e={}:"["===c?e=[]:(e=[],l=!0);for(var b,d=[e],m=1-l,y=h.length;y>m;++m){c=h[m];var a;switch(c.charCodeAt(0)){default:a=d[0],a[b||a.length]=+c,b=void 0;break;case 34:if(c=c.substring(1,c.length-1),-1!==c.indexOf("\\")&&(c=c.replace(t,v)),a=d[0],!b){if(!(a instanceof Array)){b=c||w;break}b=a.length}a[b]=c,b=void 0;break;case 91:a=d[0],d.unshift(a[b||a.length]=[]),b=void 0;break;case 93:d.shift();break;case 102:a=d[0],a[b||a.length]=!1,b=void 0;break;case 110:a=d[0],a[b||a.length]=null,b=void 0;break;case 116:a=d[0],a[b||a.length]=!0,b=void 0;break;case 123:a=d[0],d.unshift(a[b||a.length]={}),b=void 0;break;case 125:d.shift()}}if(l){if(1!==d.length)throw new Error;e=e[0]}else if(d.length)throw new Error;if(j){var p=function(n,o){var f=n[o];if(f&&"object"==typeof f){var i=null;for(var g in f)if(x.call(f,g)&&f!==n){var q=p(f,g);void 0!==q?f[g]=q:(i||(i=[]),i.push(g))}if(i)for(g=i.length;--g>=0;)delete f[i[g]]}return j.call(n,o,f)};e=p({"":e},"")}return e}}(),window.onload=function(){var xmlhttp,wrapper=document.getElementById("eventcatalogWidget"),dataSet=wrapper.dataset;if("DIV"!=wrapper.tagName)return window.console&&console.warn("Eventcatalog Error: Outdated widget version. Visit your personal page and install new one. If you have some troubles please contact us https://eventcatalog.ru/findwidgetError/"),!1;if(void 0!=dataSet)var widgetType=dataSet.widgetType,residentId=dataSet.residentId,hash=dataSet.widgetHash;else var widgetType=wrapper.getAttribute("data-widget-type"),residentId=wrapper.getAttribute("data-resident-id"),hash=wrapper.getAttribute("data-widget-hash");xmlhttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState)if(200==xmlhttp.status){var parseFunction=JSON.parse||jsonParse,response=parseFunction(xmlhttp.response);if(1==response.isSuccessful){var ratingColor=3==parseInt(widgetType)?"#fff":"#999",menuNames=getMenuNames(),imageWrapper=wrapper.getElementsByClassName("evcRatingWrapper")[0],evcWrapper=wrapper.getElementsByClassName("evcWrapper")[0],rating=document.createElement("span"),hintLayerPosition="left: -7px !important;",arrowPosition="left: 15px !important;",boxSizing="-webkit-box-sizing: inherit !important; -moz-box-sizing: inherit !important; box-sizing: inherit !important; ";rating.className="evcRating",rating.innerHTML=response.result.rating,evcWrapper.innerHTML='<div class="evcHintLayer"><a href="'+response.result.baseUrl+'">EventCatalog.ru</a><ul><li><a target="_blank" href="'+response.result.personalPage+'">'+menuNames.personalPage+'</a></li><li><a target="_blank" href="'+response.result.personalPage+'#portfolio">'+menuNames.portfolio+'</a></li><li><a target="_blank" href="'+response.result.personalPage+'#comments">'+menuNames.review+'</a></li><li><a target="_blank" href="'+response.result.personalPage+'?add=favorite">'+menuNames.favorite+'</a></li><li><a target="_blank" href="'+response.result.personalPage+'">'+menuNames.note+'</a></li></ul><span class="evcHintArrow"></span></div>',imageWrapper.insertBefore(rating,imageWrapper.firstChild),evcWrapper.insertBefore(imageWrapper,evcWrapper.firstChild),wrapper.offsetLeft>screen.width-200&&(hintLayerPosition="right: 5px !important;",arrowPosition="right: 15px !important;");var css=".evcInformer, .evcInformer .evcWrapper { height:31px !important; width: 88px !important; } .evcInformer .evcWrapper { position:absolute !important; cursor:pointer !important; margin-top: -10px !important; } .evcInformer .evcRating { position:absolute !important; top:10px !important; color:"+ratingColor+" !important; font-size:9px !important; line-height:31px !important; right:5px !important; font-family: Tahoma !important; letter-spacing: 1px !important; z-index: 2; } .evcInformer .evcHintArrow { position: absolute !important; "+arrowPosition+" bottom: -8px !important; width: 13px !important; height: 9px !important; background: url("+response.result.baseUrl+"images/widgets/hint-layer-arrow.png) 0 0 no-repeat !important; } .evcInformer .evcHintLayer { "+boxSizing+"line-height: 16px !important; display:none !important; position: absolute !important; "+hintLayerPosition+" text-align: left !important; bottom: 30px !important; width: 143px !important; padding: 20px !important; background-color:#ffffff !important; border: 1px solid #cccccc !important; border-radius: 4px !important; box-shadow: 0 0 3px 0 #cccccc !important; font-size:13px !important; font-family:Tahoma !important; } .evcInformer .evcRatingWrapper { padding-top: 10px !important; }.evcInformer .evcRatingWrapper > a { display: inline-block !important; padding: 0 !important; margin: 0 !important; color: inherit !important; }.evcInformer a { display: inline !important; text-transform: initial !important; font-weight:normal !important; font-family: Tahoma !important; font-size: 13px !important; color: #6096ca !important; text-decoration:none !important; padding:0 !important; }.evcInformer a:hover { color: #6096ca !important; background: none !important; text-decoration:underline !important; }.evcInformer ul { margin: 10px 0 0 !important; padding: 0 !important; }.evcInformer li { margin: 0 !important; padding: 0 !important; list-style-type: none !important; display: block !important; background-image: none !important; line-height: 16px !important; border-bottom: none !important;}.evcInformer .evcWidgetImage { margin:0 !important; }.evcInformer:hover .evcHintLayer { display:block !important; }",head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.type="text/css",style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style)}else widgetError(response.result.error)}else widgetError("Something wrong with AJAX request")},xmlhttp.open("GET","https://eventcatalog.ru/ajax/widget/?widgetHash="+hash+"&widgetType="+widgetType+"&residentId="+residentId,!0),xmlhttp.send()};